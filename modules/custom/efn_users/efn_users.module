<?php

use Drupal\Core\Entity\EntityInterface;
use Drupal\user\Entity\User;
use Drupal\profile\Entity\Profile;

/**
 * Implements hook_profile_insert().
 */
function efn_users_profile_insert(EntityInterface $profile) {
	// Add appropriate roles when user completes profile. Names should match.
	if (in_array($profile->bundle(), ['volunteer', 'researcher'])) {
		$user = $profile->getOwner();
		$user->addRole($profile->bundle());
		$user->save();
	}
}

/**
 * Implements hook_form_alter().
 */
function efn_users_form_alter(&$form, \Drupal\Core\Form\FormStateInterface $form_state, $form_id){
	// No damn set default buttons on forms
	if (strpos($form_id, "rofile_")){
		$form['actions']['set_default']['#access']=FALSE;
	}
}
