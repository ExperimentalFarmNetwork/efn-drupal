{% if not file_exists %}
services:
{% endif %}
{% if logger_channel is defined %}
  logger.channel.{{ module }}:
    parent: logger.channel_base
    arguments: ['{{ module }}']
{% endif %}
{% if name is defined %}
  {{ name | lower }}:
    class: {{ class_path }}
{% if services is defined %}
    arguments: [{{ servicesAsParametersKeys(services)|join(', ') }}]
{% endif %}
{% if tags is defined %}
    tags:
      - { {{ tagsAsArray(tags)|join(', ') }} }
{% endif %}
{% endif %}
